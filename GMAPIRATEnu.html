<html>

  <head>
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  </head>

  <!-- Plots go in blank <div> elements. 
    You can size them in the plot layout,
    or give the div a size as shown here.
-->

  <body>

    <div id="myDiv" style="width:90%;height:100%;"></div>
    <script>
   Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000003&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData1) {
    Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000003&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData2) {
    Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000001&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData3) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000001&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData4) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000002&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData5) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000002&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData6) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000004&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData7) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000004&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData8) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000005&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData9) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000005&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData10) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000006&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData11) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000006&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData12) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000007&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData13) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000007&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData14) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000008&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData15) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000008&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData16) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000009&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData17) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000009&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData18) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000010&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData19) {
     Plotly.d3.csv("https://api.coronavirus.data.gov.uk/v2/data?areaType=utla&areaCode=E08000010&metric=cumFirstEpisodesBySpecimenDateRate&metric=cumReinfectionsBySpecimenDateRate&format=csv", function(err, csvData20) {
              
                          var x1 = [],
                            y1 = [];

                          for (var i = 0; i < csvData1.length; i++) {
                            row1 = csvData1[i];
                            x1.push(row1['date']);
                            y1.push(row1['cumFirstEpisodesBySpecimenDateRate']);
                          }

                          var trace1 = {
                            x: x1,
                            y: y1,
                            name: 'Manchester - first episodes',
                            mode: 'lines',
                            line: {
                              color: 'rgb(255, 25, 0)',
                              size: 2
                            }
                          };

                          /* Second URL data */
                          var x2 = [],
                            y2 = [];

                          for (var i = 0; i < csvData2.length; i++) {
                            row1 = csvData2[i];
                            x2.push(row1['date']);
                            y2.push(row1['cumReinfectionsBySpecimenDateRate']);
                          }

                          var trace2 = {
                            x: x2,
                            y: y2,
                            name: 'Manchester - reinfections',
                            mode: 'lines',
                            line: {
                              color: 'rgb(255, 25, 0)',
                              dash: 'dot',
                              size: 2
                            }
                          };
                          var x3 = [],
                            y3 = [];

                          for (var i = 0; i < csvData3.length; i++) {
                            row1 = csvData3[i];
                            x3.push(row1['date']);
                            y3.push(row1['cumFirstEpisodesBySpecimenDateRate']);
                          }
                          var trace3 = {
                            x: x3,
                            y: y3,
                            name: 'Bolton -first episodes',
                            mode: 'lines',
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(110, 43, 19)',
                              size: 2
                            }
                          };
                          /* Second URL data */
                          var x4 = [],
                            y4 = [];

                          for (var i = 0; i < csvData4.length; i++) {
                            row1 = csvData4[i];
                            x4.push(row1['date']);
                            y4.push(row1['cumReinfectionsBySpecimenDateRate']);
                          }

                          var trace4 = {
                            x: x4,
                            y: y4,
                            name: 'Bolton - reinfections',
                            mode: 'lines',
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(110, 43, 19)',
                              dash: 'dot',
                              size: 2
                            }
                          };
 var x5 = [],
                    y5 = [];

                          for (var i = 0; i < csvData5.length; i++) {
                            row1 = csvData5[i];
                            x5.push(row1['date']);
                            y5.push(row1['cumFirstEpisodesBySpecimenDateRate']);
                          }
                          var trace5 = {
                            x: x5,
                            y: y5,
                            name: 'Bury - first episodes',
                            mode: 'lines',
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(35, 110, 19)',
                              size: 2
                            }
                          };
                          var x6 = [],
                    y6 = [];

                          for (var i = 0; i < csvData6.length; i++) {
                            row1 = csvData5[i];
                            x6.push(row1['date']);
                            y6.push(row1['cumReinfectionsBySpecimenDateRate']);
                          }
                          var trace6 = {
                            x: x6,
                            y: y6,
                            name: 'Bury - reinfections',
                            mode: 'lines',
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(35, 110, 19)',
                              size: 2,
                              dash: 'dot'
                            }
                          };
                           var x7 = [],
                    y7 = [];

                          for (var i = 0; i < csvData7.length; i++) {
                            row1 = csvData5[i];
                            x7.push(row1['date']);
                            y7.push(row1['cumFirstEpisodesBySpecimenDateRate']);
                          }
                          var trace7 = {
                            x: x7,
                            y: y7,
                            name: 'Oldham - first episodes',
                            mode: 'lines',
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(108, 19, 110)',
                              size: 2
                            }
                          };
 var x8 = [],
                    y8 = [];

                          for (var i = 0; i < csvData8.length; i++) {
                            row1 = csvData8[i];
                            x8.push(row1['date']);
                            y8.push(row1['cumReinfectionsBySpecimenDateRate']);
                          }
                          var trace8 = {
                            x: x8,
                            y: y8,
                            name: 'Oldham - reinfections',
                            mode: 'lines',
                           
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(108, 19, 110)',
                              size: 2,
                              dash: 'dot'
                            }
                          };
                          var x9 = [],
                    y9 = [];

                          for (var i = 0; i < csvData9.length; i++) {
                            row1 = csvData9[i];
                            x9.push(row1['date']);
                            y9.push(row1['cumFirstEpisodesBySpecimenDateRate']);
                          }
                          var trace9 = {
                            x: x9,
                            y: y9,
                            name: 'Rochdale - first episodes',
                            mode: 'lines',
                           
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(64, 60, 69)',
                              size: 2,
                        
                            }
                          };
                          var x10 = [],
                    y10 = [];

                          for (var i = 0; i < csvData10.length; i++) {
                            row1 = csvData10[i];
                            x10.push(row1['date']);
                            y10.push(row1['cumReinfectionsBySpecimenDateRate']);
                          }
                          var trace10 = {
                            x: x10,
                            y: y10,
                            name: 'Rochdale - reinfections',
                            mode: 'lines',
                           
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(64, 60, 69)',
                              size: 2,
                              dash: 'dot'
                        
                            }
                          };
                           var x11 = [],
                    y11 = [];

                          for (var i = 0; i < csvData11.length; i++) {
                            row1 = csvData11[i];
                            x11.push(row1['date']);
                            y11.push(row1['cumFirstEpisodesBySpecimenDateRate']);
                          }
                          var trace11 = {
                            x: x11,
                            y: y11,
                            name: 'Salford - first episodes',
                            mode: 'lines',
                           
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(71, 54, 5)',
                              size: 2,
                        
                            }
                          };
                          var x12 = [],
                    y12 = [];

                          for (var i = 0; i < csvData12.length; i++) {
                            row1 = csvData12[i];
                            x12.push(row1['date']);
                            y12.push(row1['cumReinfectionsBySpecimenDateRate']);
                          }
                          var trace12 = {
                            x: x12,
                            y: y12,
                            name: 'Salford - reinfections',
                            mode: 'lines',
                           
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(71, 54, 5)',
                              size: 2,
                        dash: 'dot'
                            }
                          };
                          var x13 = [],
                    y13 = [];

                          for (var i = 0; i < csvData13.length; i++) {
                            row1 = csvData13[i];
                            x13.push(row1['date']);
                            y13.push(row1['cumFirstEpisodesBySpecimenDateRate']);
                          }
                          var trace13 = {
                            x: x13,
                            y: y13,
                            name: 'Stockport - first episodes',
                            mode: 'lines',
                           
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(111, 234, 242)',
                              size: 2,
                        
                            }
                          };
                          var x14 = [],
                    y14 = [];

                          for (var i = 0; i < csvData14.length; i++) {
                            row1 = csvData14[i];
                            x14.push(row1['date']);
                            y14.push(row1['cumReinfectionsBySpecimenDateRate']);
                          }
                          var trace14 = {
                            x: x14,
                            y: y14,
                            name: 'Stockport - reinfections',
                            mode: 'lines',
                           
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(11, 234, 242)',
                              size: 2,
                        dash: 'dot'
                            }
                          };
                          var x15 = [],
                    y15 = [];

                          for (var i = 0; i < csvData15.length; i++) {
                            row1 = csvData15[i];
                            x15.push(row1['date']);
                            y15.push(row1['cumFirstEpisodesBySpecimenDateRate']);
                          }
                          var trace15 = {
                            x: x15,
                            y: y15,
                            name: 'Tameside - first episodes',
                            mode: 'lines',
                           
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(242, 111, 125)',
                              size: 2,
                        
                            }
                          };
                          var x16 = [],
                    y16 = [];

                          for (var i = 0; i < csvData16.length; i++) {
                            row1 = csvData16[i];
                            x16.push(row1['date']);
                            y16.push(row1['cumReinfectionsBySpecimenDateRate']);
                          }
                          var trace16 = {
                            x: x16,
                            y: y16,
                            name: 'Tameside - reinfections',
                            mode: 'lines',
                           
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(242, 111, 125)',
                              size: 2,
                        dash: 'dot'
                            }
                          };
                          var x17 = [],
                    y17 = [];

                          for (var i = 0; i < csvData17.length; i++) {
                            row1 = csvData17[i];
                            x17.push(row1['date']);
                            y17.push(row1['cumFirstEpisodesBySpecimenDateRate']);
                          }
                          var trace17 = {
                            x: x17,
                            y: y17,
                            name: 'Trafford - first episodes',
                            mode: 'lines',
                           
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(51, 92, 242)',
                              size: 2,
                        
                            }
                          };
                          var x18 = [],
                    y18 = [];

                          for (var i = 0; i < csvData16.length; i++) {
                            row1 = csvData18[i];
                            x18.push(row1['date']);
                            y18.push(row1['cumReinfectionsBySpecimenDateRate']);
                          }
                          var trace18 = {
                            x: x18,
                            y: y18,
                            name: 'Trafford - reinfections',
                            mode: 'lines',
                           
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(51, 92, 242)',
                              size: 2,
                        dash: 'dot'
                            }
                          };
                          var x19 = [],
                    y19 = [];

                          for (var i = 0; i < csvData19.length; i++) {
                            row1 = csvData19[i];
                            x19.push(row1['date']);
                            y19.push(row1['cumFirstEpisodesBySpecimenDateRate']);
                          }
                          var trace19 = {
                            x: x19,
                            y: y19,
                            name: 'Wigan - first episodes',
                            mode: 'lines',
                           
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(76, 242, 51)',
                              size: 2,
                        
                            }
                          };
                          var x20 = [],
                    y20 = [];

                          for (var i = 0; i < csvData20.length; i++) {
                            row1 = csvData20[i];
                            x20.push(row1['date']);
                            y20.push(row1['cumReinfectionsBySpecimenDateRate']);
                          }
                          var trace20 = {
                            x: x20,
                            y: y20,
                            name: 'Wigan - reinfections',
                            mode: 'lines',
                           
                            visible: 'legendonly',
                            line: {
                              color: 'rgb(76, 242, 51)',
                              size: 2,
                        dash: 'dot'
                            }
                          };
                          data = [trace1, trace2, trace3, trace4,trace5,trace6,trace7,trace8,trace9,trace10,trace11,trace12,trace13,trace14,trace15,trace16,trace17,trace18,trace19,trace20];

                          layout = {
                            paper_bgcolor: 'rgb(255, 255, 255)',
                            plot_bgcolor: 'rgb(255, 255, 255)',
                            autosize: false,
                            width: 900,
                            height: 600,
                            margin: {
                              l: 70,
                              r: 20,
                              b: 120,
                              t: 40,
                              pad: 4
                            },
                            showlegend: true,
                            legend: {
                              x: 1.00,
                              y: 1
                            },
                            xaxis: {
                              range: ['2021-01-01', '2022-01-31'],
                              title: '',
                              tickangle: 320
                            },
                            yaxis: {
                              range: [0, 30000],
                              title: 'Rate per 100,000 population',
                              type: 'lines'
                            },
                            annotations: [{
                                x: '2020-03-09',
                                y: 10000,
                                xref: 'x',
                                yref: 'y',
                                text: '2020',
                                font: {
                                  size: 14,
                                  color: '#bb99df'
                                },
                                showarrow: false,

                              },
                              {
                                x: '2021-01-11',
                                y: 10000,
                                xref: 'x',
                                yref: 'y',
                                text: '2021',
                                font: {
                                  size: 14,
                                  color: '#bb99df'
                                },
                                showarrow: false,

                              }
                            ],

                            hovermode: "x",
                            hoverlabel: {
                              namelength: -1,
                              bgcolor: "#FFF"
                            },
                            config: {
                              responsive: true
                            }

                          };

                          Plotly.newPlot('myDiv', data, layout);
                        });
                      });
                    });
                  });
                  });
                  });
                  });
                  });
                  });
                  });
                  });
                  });
                   });
                  });
                  });
                  });
                  });
                  });
 });
                  });
    </script>
  </body>

</html>
